<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<title>學生查詢系統 (注音索引)</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
/* ==============================
   基本樣式
   ============================== */
body { font-family: Arial, sans-serif; margin: 30px auto; max-width: 1000px; }
a { color: #0066cc; text-decoration: underline; cursor: pointer; margin: 0 6px; }
table { margin: 20px 0; border-collapse: collapse; width: 100%; }
th, td { border: 1px solid #333; padding: 8px; text-align: left; vertical-align: top; }
th { background-color: #f5f5f5; width: 280px; }
h2, h3 { margin: 12px 0; }
.muted { color: #666; font-size: 14px; }

/* 表格下方的返回頂端文字 */
.back-link {
  margin-top: 12px;
  font-size: 14px;
  color: #d32f2f;
  cursor: pointer;
  text-align: center;
  user-select: none;
}
.back-link:hover { text-decoration: underline; }
</style>
</head>
<body>
<h2>學生查詢系統 (注音索引)</h2>

<!-- ==============================
     注音索引區（完整 ㄅ～ㄩ）
     - 點擊注音 → 顯示該注音對應的姓氏清單
     ============================== -->
<div id="bopomofoIndex">
  <!-- 聲母 -->
  <a href="#" onclick="showSurnames('ㄅ'); return false;">ㄅ</a> |
  <a href="#" onclick="showSurnames('ㄆ'); return false;">ㄆ</a> |
  <a href="#" onclick="showSurnames('ㄇ'); return false;">ㄇ</a> |
  <a href="#" onclick="showSurnames('ㄈ'); return false;">ㄈ</a> |
  <a href="#" onclick="showSurnames('ㄉ'); return false;">ㄉ</a> |
  <a href="#" onclick="showSurnames('ㄊ'); return false;">ㄊ</a> |
  <a href="#" onclick="showSurnames('ㄋ'); return false;">ㄋ</a> |
  <a href="#" onclick="showSurnames('ㄌ'); return false;">ㄌ</a> |
  <a href="#" onclick="showSurnames('ㄍ'); return false;">ㄍ</a> |
  <a href="#" onclick="showSurnames('ㄎ'); return false;">ㄎ</a> |
  <a href="#" onclick="showSurnames('ㄏ'); return false;">ㄏ</a> |
  <a href="#" onclick="showSurnames('ㄐ'); return false;">ㄐ</a> |
  <a href="#" onclick="showSurnames('ㄑ'); return false;">ㄑ</a> |
  <a href="#" onclick="showSurnames('ㄒ'); return false;">ㄒ</a> |
  <a href="#" onclick="showSurnames('ㄓ'); return false;">ㄓ</a> |
  <a href="#" onclick="showSurnames('ㄔ'); return false;">ㄔ</a> |
  <a href="#" onclick="showSurnames('ㄕ'); return false;">ㄕ</a> |
  <a href="#" onclick="showSurnames('ㄖ'); return false;">ㄖ</a> |
  <a href="#" onclick="showSurnames('ㄗ'); return false;">ㄗ</a> |
  <a href="#" onclick="showSurnames('ㄘ'); return false;">ㄘ</a> |
  <a href="#" onclick="showSurnames('ㄙ'); return false;">ㄙ</a> |
  <!-- 韻母與介音 -->
  <a href="#" onclick="showSurnames('ㄧ'); return false;">ㄧ</a> |
  <a href="#" onclick="showSurnames('ㄨ'); return false;">ㄨ</a> |
  <a href="#" onclick="showSurnames('ㄩ'); return false;">ㄩ</a> |
  <a href="#" onclick="showSurnames('ㄚ'); return false;">ㄚ</a> |
  <a href="#" onclick="showSurnames('ㄛ'); return false;">ㄛ</a> |
  <a href="#" onclick="showSurnames('ㄜ'); return false;">ㄜ</a> |
  <a href="#" onclick="showSurnames('ㄝ'); return false;">ㄝ</a> |
  <a href="#" onclick="showSurnames('ㄞ'); return false;">ㄞ</a> |
  <a href="#" onclick="showSurnames('ㄟ'); return false;">ㄟ</a> |
  <a href="#" onclick="showSurnames('ㄠ'); return false;">ㄠ</a> |
  <a href="#" onclick="showSurnames('ㄡ'); return false;">ㄡ</a> |
  <a href="#" onclick="showSurnames('ㄢ'); return false;">ㄢ</a> |
  <a href="#" onclick="showSurnames('ㄣ'); return false;">ㄣ</a> |
  <a href="#" onclick="showSurnames('ㄤ'); return false;">ㄤ</a> |
  <a href="#" onclick="showSurnames('ㄥ'); return false;">ㄥ</a> |
  <a href="#" onclick="showSurnames('ㄦ'); return false;">ㄦ</a>
</div>

<!-- ==============================
     顯示區塊（依序：姓氏 → 名字 → 詳細資料）
     ============================== -->
<div id="surnameList"></div>
<div id="nameList"></div>
<div id="result"></div>

<script>
/* 平滑返回頂端 */
function scrollToTop() {
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

/* ==============================
   資料層：學生主資料（依你提供的 Word 版本）
   - 年級顯示為「手動輸入」，格式：校名 - 年級 - 安親老師
   - 不依生日自動計算年級
   ============================== */
const studentData = {
  "潘柏霖 Leo": {
    "年級資訊": "普仁國小 - 四年級 - Vita老師",
    "放學時間": { "週一": "18:45", "週二": "18:45", "週三": "18:30", "週四": "18:45", "週五": "18:30" },
    "連絡電話": { "爸爸": "", "媽媽": "", "奶奶": "" }
  },
  "潘怩霓 Nini": {
    "年級資訊": "普仁國小 - 一年級 - Mina老師",
    "放學時間": { "週一": "18:30", "週二": "18:30", "週三": "18:30", "週四": "18:30", "週五": "18:30" },
    "美語班": { "班級": "4J1", "老師": "Angel", "時間": "週一 13:15-14:45 / 週四 13:15-14:45", "GEO": { "帳號": "4022724581", "密碼": "20190323" } },
    "連絡電話": { "爸爸": "0955-090-813", "媽媽": "0911-169-066" },
    "兄弟姊妹": {
      "潘賜宸 Jason": { "年級資訊": "普仁國小 - 四年級 - Vita老師", "放學時間": { "週一": "18:45", "週二": "20:00", "週三": "18:30", "週四": "18:45", "週五": "20:00" } }
    }
  },
  "潘賜宸 Jason": {
    "年級資訊": "普仁國小 - 四年級 - Vita老師",
    "放學時間": { "週一": "18:45", "週二": "20:00", "週三": "18:30", "週四": "18:45", "週五": "20:00" },
    "美語班": { "班級": "0J3", "老師": "Elaine", "時間": "週二 18:00-20:00 / 週五 18:00-20:00", "GEO": { "帳號": "4022662280", "密碼": "20160522" } },
    "連絡電話": { "爸爸": "0955-090-813", "媽媽": "0911-169-066" },
    "兄弟姊妹": {
      "潘怩霓 Nini": { "年級資訊": "普仁國小 - 一年級 - Mina老師", "放學時間": { "週一": "18:30", "週二": "18:30", "週三": "18:30", "週四": "18:30", "週五": "18:30" } }
    }
  },
  "尹尚元 Morris": {
    "年級資訊": "普仁國小 - 三年級 - Angel老師",
    "放學時間": { "週一": "18:30", "週二": "18:30", "週三": "17:30", "週四": "18:30", "週五": "17:30" },
    "連絡電話": { "爸爸": "", "媽媽": "", "奶奶": "" }
  },
  "彭莉雯 Lena": {
    "年級資訊": "普仁國小 - 六年級 - Mandy老師",
    "放學時間": { "週一": "20:00", "週二": "19:00", "週三": "19:00", "週四": "20:00", "週五": "19:00" },
    "美語班": { "班級": "9J3", "老師": "Elaine", "時間": "週一 18:00-20:00 / 週四 18:00-20:00", "GEO": { "帳號": "4022063672", "密碼": "20140627" } },
    "連絡電話": { "爸爸": "0935-592-752", "媽媽": "0925-111-385" },
    "兄弟姊妹": {
      "彭宥鈞 Tim": { "年級資訊": "普仁國小 - 四年級 - Vita老師", "放學時間": { "週一": "18:45", "週二": "18:45", "週三": "18:30", "週四": "18:45", "週五": "18:30" } }
    }
  },
  "彭宥鈞 Tim": {
    "年級資訊": "普仁國小 - 六年級 - Mandy老師",
    "放學時間": { "週一": "18:45", "週二": "18:45", "週三": "18:30", "週四": "18:45", "週五": "18:30" },
    "連絡電話": { "爸爸": "0935-592-752", "媽媽": "0925-111-385" },
    "兄弟姊妹": {
      "彭莉雯 Lena": { "年級資訊": "普仁國小 - 六年級 - Mandy老師", "放學時間": { "週一": "20:00", "週二": "19:00", "週三": "19:00", "週四": "20:00", "週五": "19:00" } }
    }
  },
  "方芃穎 Queenkle": {
    "年級資訊": "普仁國小 - 五年級 - Ruby老師",
    "放學時間": { "週一": "19:30", "週二": "20:00", "週三": "19:30", "週四": "19:30", "週五": "20:00" },
    "美語班": { "班級": "3J2", "老師": "Mosa", "時間": "週二 18:00-20:00 / 週五 18:00-20:00", "GEO": { "帳號": "4022205116", "密碼": "20141105" } },
    "連絡電話": { "爸爸": "0922-330-662", "媽媽": "0956-230-825" },
    "兄弟姊妹": {
      "方冠惟 Hardy": { "年級資訊": "普仁國小 - 三年級 - Angel老師", "放學時間": { "週一": "18:30", "週二": "18:30", "週三": "17:30", "週四": "18:30", "週五": "17:30" } }
    }
  },
  "方冠惟 Hardy": {
    "年級資訊": "普仁國小 - 三年級 - Angel老師",
    "放學時間": { "週一": "18:30", "週二": "18:30", "週三": "17:30", "週四": "18:30", "週五": "17:30" },
    "美語班": { "班級": "3J1", "老師": "Elaine", "時間": "週一 16:00-18:00 / 週三 13:15-15:15", "GEO": { "帳號": "4022734138", "密碼": "20170124" } },
    "連絡電話": { "爸爸": "0922-330-662", "媽媽": "0956-230-825" },
    "兄弟姊妹": {
      "方芃穎 Queenkle": { "年級資訊": "普仁國小 - 五年級 - Ruby老師", "放學時間": { "週一": "19:30", "週二": "20:00", "週三": "19:30", "週四": "19:30", "週五": "20:00" } }
    }
  },
  "傅樂庭": {
    "年級資訊": "富台國小 - 六年級 - Mandy老師",
    "放學時間": { "週一": "19:00", "週二": "19:00", "週三": "19:00", "週四": "19:00", "週五": "19:00" },
    "連絡電話": { "爸爸": "", "媽媽": "", "奶奶": "" }
  },
  "塗凱恩": {
    "年級資訊": "富台國小 - 二年級 - Fanny老師",
    "放學時間": { "週一": "18:30", "週二": "18:30", "週三": "18:30", "週四": "18:30", "週五": "18:30" },
    "連絡電話": { "爸爸": "", "媽媽": "", "奶奶": "" }
  },
  "賴冠茹 Lulu": {
    "年級資訊": "普仁國小 - 六年級 - Mandy老師",
    "放學時間": { "週一": "20:00", "週二": "19:00", "週三": "19:00", "週四": "20:00", "週五": "19:00" },
    "美語班": { "班級": "9J3", "老師": "Elaine", "時間": "週一 18:00-20:00 / 週四 18:00-20:00", "GEO": { "帳號": "4022017483", "密碼": "20131204" } },
    "連絡電話": { "家": "(03)466-8480", "爸爸": "0958-993-502", "媽媽": "0920-394-276" },
  },
  "李民宇 Bryan": {
    "年級資訊": "普仁國小 - 四年級 - Vita老師",
    "放學時間": { "週一": "18:45", "週二": "18:45", "週三": "18:30", "週四": "18:45", "週五": "18:30" },
    "連絡電話": { "爸爸": "", "媽媽": "" },
    "兄弟姊妹": {
      "李芯宇 Winnie": { "年級資訊": "普仁國小 - 一年級 - Mina老師", "放學時間": { "週一": "18:30", "週二": "18:30", "週三": "18:30", "週四": "18:30", "週五": "18:30" } }
    }
  },
  "李芊緗 Lydia": {
    "年級資訊": "普仁國小 - 五年級 - Ruby老師",
    "放學時間": { "週一": "20:00", "週二": "19:30", "週三": "19:30", "週四": "20:00", "週五": "19:30" },
    "美語班": { "班級": "2J2", "老師": "Mosa", "時間": "週一 18:00-20:00 / 週四 18:00-20:00", "GEO": { "帳號": "4022374906", "密碼": "20141218" } },
    "連絡電話": { "家": "(03)460-2666", "爸爸": "0982-662-420", "媽媽": "0975-279-872" },
    "兄弟姊妹": {
      "李峪睿 Ray": { "年級資訊": "普仁國小 - 二年級 - Fanny老師", "放學時間": { "週一": "18:30", "週二": "18:30", "週三": "18:30", "週四": "18:30", "週五": "18:30" } }
    }
  },
  "李芯宇 Winnie": {
    "年級資訊": "普仁國小 - 一年級 - Mina老師",
    "放學時間": { "週一": "18:30", "週二": "18:30", "週三": "18:30", "週四": "18:30", "週五": "18:30" },
    "連絡電話": { "爸爸": "", "媽媽": "" },
    "兄弟姊妹": {
      "李民宇 Bryan": { "年級資訊": "普仁國小 - 四年級 - Vita老師", "放學時間": { "週一": "18:45", "週二": "18:45", "週三": "18:30", "週四": "18:45", "週五": "18:30" } }
    }
  },
  "李承祐": {
    "年級資訊": "富台國小 - 六年級 - Mandy老師",
    "放學時間": { "週一": "19:00", "週二": "17:30", "週三": "19:00", "週四": "19:00", "週五": "17:30" },
    "連絡電話": { "爸爸": "", "媽媽": "" },
  },
  "李祤棠 Olivia": {
    "年級資訊": "普仁國小 - 一年級 - Mina老師",
    "放學時間": { "週一": "18:30", "週二": "18:30", "週三": "18:30", "週四": "18:30", "週五": "18:30" },
    "美語班": { "班級": "4J1", "老師": "Angel", "時間": "週一 13:15-14:45 / 週四 13:15-14:45", "GEO": { "帳號": "4022692468", "密碼": "20181203" } },
    "連絡電話": { "爸爸": "0982-749-930", "媽媽": "0985-287-558" },
  },
  "李峪睿 Ray": {
    "年級資訊": "普仁國小 - 二年級 - Fanny老師",
    "放學時間": { "週一": "18:30", "週二": "18:30", "週三": "18:30", "週四": "18:30", "週五": "18:30" },
    "美語班": { "班級": "3J3", "老師": "Mosa", "時間": "週一 13:15-15:15 / 週五 13:15-15:15", "GEO": { "帳號": "4022171643", "密碼": "20171206" } },
    "連絡電話": { "家": "(03)460-2666", "爸爸": "0982-662-420", "媽媽": "0975-279-872" },
    "兄弟姊妹": {
      "李芊緗 Lydia": { "年級資訊": "普仁國小 - 五年級 - Ruby老師", "放學時間": { "週一": "20:00", "週二": "19:30", "週三": "19:30", "週四": "20:00", "週五": "19:30" } }
    }
  },
  "廖芷均 Nina": {
    "年級資訊": "普仁國小 - 五年級 - Ruby老師",
    "放學時間": { "週一": "19:30", "週二": "20:00", "週三": "19:30", "週四": "19:30", "週五": "20:00" },
    "美語班": { "班級": "0J3", "老師": "Elaine", "時間": "週二 18:00-20:00 / 週五 18:00-20:00", "GEO": { "帳號": "4022260313", "密碼": "20150405" } },
    "連絡電話": { "爸爸": "0933-968-959", "媽媽": "0937-687-013" },
  },
  "廖苡瑄 Sharon": {
    "年級資訊": "普仁國小 - 五年級 - Ruby老師",
    "放學時間": { "週一": "19:30", "週二": "20:00", "週三": "19:30", "週四": "19:30", "週五": "20:00" },
    "美語班": { "班級": "0J3", "老師": "Elaine", "時間": "週二 18:00-20:00 / 週五 18:00-20:00", "GEO": { "帳號": "4022549970", "密碼": "20141114" } },
    "連絡電話": { "爸爸": "0978-886-957" },
  },
  "劉芷妡 Cindy": {
    "年級資訊": "普仁國小 - 五年級 - Ruby老師",
    "放學時間": { "週一": "19:30", "週二": "20:00", "週三": "19:30", "週四": "19:30", "週五": "20:00" },
    "美語班": { "班級": "0J3", "老師": "Elaine", "時間": "週二 18:00-20:00 / 週五 18:00-20:00", "GEO": { "帳號": "4022307268", "密碼": "20150702" } },
    "連絡電話": { "爸爸": "0910-625-035", "媽媽": "0925-210-627" },
  },
  "林謝瑀芯 Lisa": {
    "年級資訊": "普仁國小 - 二年級 - Fanny老師",
    "放學時間": { "週一": "19:00", "週二": "19:00", "週三": "19:00", "週四": "19:00", "週五": "19:00" },
    "美語班": { "班級": "3J3", "老師": "Mosa", "時間": "週一 13:15-15:15 / 週五 13:15-15:15", "GEO": { "帳號": "4022661392", "密碼": "20180805" } },
    "連絡電話": { "爸爸": "0925-350-321", "媽媽": "0955-060-836" },
  },
  "林宸逸 Ethan": {
    "年級資訊": "普仁國小 - 一年級 - Mina老師",
    "放學時間": { "週一": "18:30", "週二": "18:30", "週三": "18:30", "週四": "18:30", "週五": "18:30" },
    "美語班": { "班級": "4J3", "老師": "Mosa", "時間": "週三 13:15-14:45 / 週五 13:15-14:45", "GEO": { "帳號": "4022987577", "密碼": "20190427" } },
    "連絡電話": { "爸爸": "0972-765-266", "媽媽": "0912-086-800" },
  },
  "林禹希 Celia": {
    "年級資訊": "普仁國小 - 二年級 - Fanny老師",
    "放學時間": { "週一": "19:30", "週二": "18:30", "週三": "18:00", "週四": "18:30", "週五": "17:30" },
    "美語班": { "班級": "2J3", "老師": "Mosa", "時間": "週一 16:00-18:00 / 週三 15:30-17:30", "GEO": { "帳號": "4022468917", "密碼": "20161027" } },
    "連絡電話": { "媽媽": "0932-371-547" },
  },
  "盧品學 Ryder": {
    "年級資訊": "普仁國小 - 一年級 - Mina老師",
    "放學時間": { "週一": "18:30", "週二": "18:30", "週三": "18:30", "週四": "18:30", "週五": "18:30" },
    "美語班": { "班級": "4J3", "老師": "Mosa", "時間": "週三 13:15-14:45 / 週五 13:15-14:45", "GEO": { "帳號": "4022938716", "密碼": "20181211" } },
    "連絡電話": { "爸爸": "0985-291-856", "媽媽": "0934-171-420" },
  },
};

/* ==============================
   索引層：注音 → 姓氏對應表
   ============================== */
const bopomofoMap = {
  "ㄅ": [""],
  "ㄆ": ["潘", "彭"],
  "ㄇ": [""],
  "ㄈ": ["方", "傅"],
  "ㄉ": [""],
  "ㄊ": ["塗"],
  "ㄋ": [""],
  "ㄌ": ["賴", "李", "廖", "劉", "林", "盧"],
  "ㄍ": [""],
  "ㄎ": [""],
  "ㄏ": [""],
  "ㄐ": [""],
  "ㄑ": [""],
  "ㄒ": [""],
  "ㄓ": ["張"],
  "ㄔ": [""],
  "ㄕ": [""],
  "ㄖ": [""],
  "ㄗ": [""],
  "ㄘ": [""],
  "ㄙ": [""],
  "ㄧ": ["尹", "楊"],
  "ㄨ": ["王"],
  "ㄩ": [""],
  "ㄚ": [""],
  "ㄛ": [""],
  "ㄜ": [""],
  "ㄝ": [""],
  "ㄞ": [""],
  "ㄟ": [""],
  "ㄠ": [""],
  "ㄡ": [""],
  "ㄢ": [""],
  "ㄣ": [""],
  "ㄤ": [""],
  "ㄥ": [""],
  "ㄦ": [""]
  // 其他注音可逐步擴充：例 "ㄇ": ["馬"] ...
};

/* ==============================
   介面層：顯示姓氏清單
   ============================== */
function showSurnames(bopomofo) {
  const surnames = bopomofoMap[bopomofo] || [];
  let html = "<h3>姓氏清單</h3>";

  if (surnames.length === 0) {
    html += `<div class="muted">此注音目前尚未配置姓氏。</div>`;
  } else {
    surnames.forEach(surname => {
      html += `<a href="#" onclick="showNames('${surname}'); return false;">${surname}</a><br/>`;
    });
  }

  document.getElementById("surnameList").innerHTML = html;
  document.getElementById("nameList").innerHTML = "";
  document.getElementById("result").innerHTML = "";
}

/* ==============================
   介面層：顯示名字清單（依姓氏過濾，不排序）
   ============================== */
function showNames(surname) {
  let html = `<h3>${surname} 姓學生</h3>`;
  const names = Object.keys(studentData).filter(n => n.startsWith(surname));

  if (names.length === 0) {
    html += `<div class="muted">目前沒有 ${surname} 姓的學生。</div>`;
  } else {
    names.forEach(name => {
      html += `<a href="#" onclick="showInfo('${name}'); return false;">${name}</a><br/>`;
    });
  }

  document.getElementById("nameList").innerHTML = html;
  document.getElementById("result").innerHTML = "";
}

/* ==============================
   介面層：顯示完整學生資料（自動隱藏未提供欄位）
   - 表格下方加入可點擊的返回頂端文字
   ============================== */
function showInfo(name) {
  const data = studentData[name];
  if (!data) return;

  let tableHTML = `<h3>${name} 的資料</h3>`;
  tableHTML += "<table><tr><th>項目</th><th>內容</th></tr>";

  // 年級資訊（手動輸入）
  if (data["年級資訊"]) {
    tableHTML += `<tr><td>年級資訊</td><td>${data["年級資訊"]}</td></tr>`;
  }

  // 放學時間（週一～週五）
  if (data["放學時間"]) {
    let times = "";
    for (const day in data["放學時間"]) {
      if (data["放學時間"][day]) {
        times += `${day}：${data["放學時間"][day]}<br/>`;
      }
    }
    if (times) {
      tableHTML += `<tr><td>放學時間</td><td>${times}</td></tr>`;
    }
  }

  // 美語班資訊（班級-老師、上課時間、GEO: 帳號/密碼）
  if (data["美語班"]) {
    const eng = data["美語班"];
    const geo = eng["GEO"] || {};
    let engInfo = "";

    if (eng["班級"] || eng["老師"]) {
      engInfo += `${eng["班級"] || ""} - Tr. ${eng["老師"] || ""}<br/>`;
    }
    if (eng["時間"]) {
      engInfo += `上課時間：${eng["時間"]}<br/>`;
    }
    if (geo["帳號"] || geo["密碼"]) {
      engInfo += `GEO: 帳號 ${geo["帳號"] || "-"} / 密碼 ${geo["密碼"] || "-"}`;
    }

    if (engInfo) {
      tableHTML += `<tr><td>美語班資訊</td><td>${engInfo}</td></tr>`;
    }
  }

  // 連絡電話（僅顯示有填寫的聯絡方式）
  if (data["連絡電話"]) {
    const phones = data["連絡電話"];
    let phoneHTML = "";
    for (const rel in phones) {
      if (phones[rel]) {
        phoneHTML += `${rel}：${phones[rel]}<br/>`;
      }
    }
    if (phoneHTML) {
      tableHTML += `<tr><td>連絡電話</td><td>${phoneHTML}</td></tr>`;
    }
  }

  // 兄弟姊妹（名字後方括號顯示年級；可點擊跳轉；放學時間若缺則不顯示該段）
  if (data["兄弟姊妹"]) {
    const siblings = data["兄弟姊妹"];
    let sibHTML = "";

    for (const sibName in siblings) {
      const s = siblings[sibName] || {};
      const gradeText = s["年級資訊"] || "年級未提供";

      // 若兄弟姊妹在主資料：跳轉 showInfo；否則：跳轉 showSibling
      const hasFullRecord = !!studentData[sibName];
      const linkHandler = hasFullRecord
        ? `showInfo('${sibName}'); return false;`
        : `showSibling('${name}','${sibName}'); return false;`;

      let oneSibBlock = `<div><a href="#" onclick="${linkHandler}">${sibName}（${gradeText}）</a>`;

      if (s["放學時間"]) {
        let sibTimes = "";
        for (const day in s["放學時間"]) {
          if (s["放學時間"][day]) {
            sibTimes += `${day}：${s["放學時間"][day]}<br/>`;
          }
        }
        if (sibTimes) {
          oneSibBlock += `<br/><strong>放學時間：</strong><br/>${sibTimes}`;
        }
      }

      oneSibBlock += `</div>`;
      sibHTML += oneSibBlock;
    }

    if (sibHTML) {
      tableHTML += `<tr><td>兄弟姊妹資訊</td><td>${sibHTML}</td></tr>`;
    }
  }

  tableHTML += "</table>";

  // 表格下方加入返回頂端文字（滑順移動）
  tableHTML += `<div class="back-link" onclick="scrollToTop()"> ⤒ ⤒ 點 擊 此 處 ～ 移 動 至 網 頁 最 上 方 ⤒ ⤒ </div>`;

  document.getElementById("result").innerHTML = tableHTML;
}

/* ==============================
   介面層：兄弟姊妹獨立頁（當不在主 studentData 名單中時）
   - 年級資訊（手動文字，若缺則不顯示該列）
   - 放學時間（週一～週五；無則不顯示）
   - 表格下方加入返回頂端文字（滑順移動）
   ============================== */
function showSibling(parentName, sibName) {
  const parent = studentData[parentName];
  if (!parent || !parent["兄弟姊妹"] || !parent["兄弟姊妹"][sibName]) return;

  const s = parent["兄弟姊妹"][sibName] || {};

  let tableHTML = `<h3>${sibName} 的資料（兄弟姊妹頁）</h3>`;
  tableHTML += "<table><tr><th>項目</th><th>內容</th></tr>";

  // 年級資訊（若存在才顯示，安親老師通常無資料）
  if (s["年級資訊"]) {
    tableHTML += `<tr><td>年級資訊</td><td>${s["年級資訊"]} - 未提供</td></tr>`;
  }

  // 放學時間（若存在才顯示）
  if (s["放學時間"]) {
    let times = "";
    for (const day in s["放學時間"]) {
      if (s["放學時間"][day]) {
        times += `${day}：${s["放學時間"][day]}<br/>`;
      }
    }
    if (times) {
      tableHTML += `<tr><td>放學時間</td><td>${times}</td></tr>`;
    }
  }

  tableHTML += "</table>";

  // 表格下方加入返回頂端文字（滑順移動）
  tableHTML += `<div class="back-link" onclick="scrollToTop()"> ⤒ ⤒ 點 擊 此 處 ～ 移 動 至 網 頁 最 上 方 ⤒ ⤒ </div>`;

  document.getElementById("result").innerHTML = tableHTML;
}
</script>
</body>
</html>
